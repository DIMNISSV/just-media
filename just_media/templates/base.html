{# templates/base.html #}
{% extends "bootstrap5/base.html" %} {# <<< Наследуем от базового шаблона CMS #}
{% load cms_tags menu_tags static i18n sekizai_tags %} {# Добавляем static #}
{# --- CSS --- #}
{% block base_css %}
    {# Используем стандартный Bootstrap из родительского шаблона #}
    {{ block.super }}
    {# Дополнительные/кастомные CSS можно добавить через Sekizai или здесь #}
    {# Пример: <link rel="stylesheet" href="{% static 'css/custom_theme.css' %}"> #}
{% endblock %}

{# --- Navbar с переключателем темы --- #}
{% block navbar %}
    {# Классы navbar-dark bg-dark будут управляться через data-bs-theme #}
    <nav class="navbar navbar-expand-lg bg-body-tertiary border-bottom" data-bs-theme="dark">
        {# <<< Начинаем с темной для примера, JS установит правильную #}
        <div class="container">
            <a class="navbar-brand" href="/">{% block brand %}Just Media{% endblock %}</a>
            {# <<< Добавим название сайта #}
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent"
                    aria-expanded="false" aria-label="{% trans 'Toggle navigation' %}">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                {# CMS Menu #}
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    {% block menubar %}{% show_menu 0 100 100 100 'bootstrap5/menu.html' %}{% endblock %}
                </ul>

                {# Search bar placeholder (если понадобится) #}
                {% block searchbar %}{% endblock %}

                {# --- Theme Switcher --- #}
                <div class="d-flex ms-auto align-items-center">
                    <button id="theme-switcher-btn" class="btn btn-outline-secondary btn-sm" type="button"
                            aria-label="{% trans 'Toggle theme' %}">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                             class="bi bi-circle-half" viewBox="0 0 16 16">
                            <path d="M8 15A7 7 0 1 0 8 1v14zm0 1A8 8 0 1 1 8 0a8 8 0 0 1 0 16z"/>
                        </svg>
                        <span class="d-none d-md-inline ms-1" id="theme-switcher-text"></span>
                        {# Текст для больших экранов #}
                    </button>
                </div>
                {# --- End Theme Switcher --- #}

            </div>
        </div>
    </nav>
{% endblock navbar %}

{# --- Основной контент --- #}
{# Блок content уже определен в djangocms_frontend.html, мы его используем в дочерних шаблонах #}

{# --- JavaScript --- #}
{% block base_js %}
    {{ block.super }}
    <script src="{% static 'js/theme_switcher.js' %}" defer></script>
{% endblock %}

{% block extra_js %}{% endblock %}
{% block bottom_css %}{% endblock %}
